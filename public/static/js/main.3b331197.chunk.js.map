{"version":3,"sources":["sounds/metronome1.flac","components/BufferLoader.js","components/metronomeUtil.js","components/Metronome.jsx","components/Drone.js","components/ToneGenerator.jsx","App.jsx","components/AutoGnome.jsx","index.js"],"names":["module","exports","BufferLoader","context","urlList","callback","this","onload","bufferList","loadCount","prototype","loadBuffer","url","index","request","XMLHttpRequest","open","responseType","loader","decodeAudioData","response","buffer","length","alert","error","console","onerror","send","load","i","window","AudioContext","webkitAudioContext","finishedLoading","a","async","undefined","metronomeClick","setIntervalCancel","ended","queue","play","tempo","goal","incrementBy","incrementEvery","timeContext","rawTempo","calculatedTempo","currentTime","incrementCompletion","setInterval","shift","source","createBufferSource","connect","destination","onended","start","push","cancel","node","clearInterval","stop","Metronome","props","state","hidden","howLong","setState","Number","newGoalTempo","newIncrement","newIncrementEvery","stopMetronome","className","type","value","onChange","e","changeTempo","target","changeGoal","changeIncrementBy","changeIncrementEvery","changeHowLong","onClick","incrementBy10","decrementBy10","React","Component","pitches","sounds","ToneGenerator","useState","pitch","setPitch","isPlaying","setIsPlaying","startSound","freq","log","oscillator","createOscillator","gain","createGain","frequency","makeSound","cancelSound","sound","stopSound","pitchName","min","max","changePitch","App","practiceStack","addToPracticeStack","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.3b331197.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/metronome1.fd742d0f.flac\";","const BufferLoader = function(context, urlList, callback) {\n  this.context = context;\n  this.urlList = urlList;\n  this.onload = callback;\n  this.bufferList = [];\n  this.loadCount = 0;\n};\n\nBufferLoader.prototype.loadBuffer = function(url, index) {\n  // Load buffer asynchronously\n  var request = new XMLHttpRequest();\n  request.open('GET', url, true);\n  request.responseType = 'arraybuffer';\n\n  var loader = this;\n\n  request.onload = function() {\n    // Asynchronously decode the audio file data in request.response\n    loader.context.decodeAudioData(\n      request.response,\n      function(buffer) {\n        if (!buffer) {\n          alert('error decoding file data: ' + url);\n          return;\n        }\n        loader.bufferList[index] = buffer;\n        if (++loader.loadCount === loader.urlList.length)\n          loader.onload(loader.bufferList);\n      },\n      function(error) {\n        console.error('decodeAudioData error', error);\n      }\n    );\n  };\n\n  request.onerror = function() {\n    alert('BufferLoader: XHR error');\n  };\n\n  request.send();\n};\n\nBufferLoader.prototype.load = function() {\n  for (var i = 0; i < this.urlList.length; ++i)\n    this.loadBuffer(this.urlList[i], i);\n};\n\nexport default BufferLoader;\n","import metronomeClick from '../sounds/metronome1.flac';\nimport BufferLoader from './BufferLoader.js';\nwindow.AudioContext = window.AudioContext || window.webkitAudioContext;\n\nconst context = new AudioContext();\nlet buffer;\n\nconst finishedLoading = bufferList => {\n  buffer = bufferList[0];\n};\n\n(async () => {\n  if (buffer === undefined) {\n    let bufferLoader = new BufferLoader(\n      context,\n      [metronomeClick],\n      finishedLoading\n    );\n    bufferLoader.load();\n  }\n})();\n\nlet ended = 0;\nlet queue = [];\nlet setIntervalCancel;\n\nconst play = (tempo, goal, incrementBy, incrementEvery) => {\n  let timeContext = new AudioContext();\n  let rawTempo = tempo;\n  let calculatedTempo = 60 / rawTempo;\n\n  let currentTime = timeContext.currentTime + 0.2;\n  let incrementCompletion = 0;\n  setIntervalCancel = setInterval(() => {\n    // clear out old gnomes from queue to save memory\n    for (let i = 0; i < ended; i++) {\n      queue.shift();\n    }\n    ended = 0;\n\n    if (queue.length < 21) {\n      for (let i = 1; i < 21; i++) {\n        // update tempo if incrementing\n        if (incrementBy && incrementEvery && rawTempo < goal) {\n          if (incrementCompletion > incrementEvery) {\n            incrementCompletion = 0;\n            rawTempo += incrementBy;\n            if (rawTempo > goal) {\n              rawTempo = goal;\n            }\n            calculatedTempo = 60 / rawTempo;\n          }\n        }\n\n        // generate audio and push to queue\n        let source = timeContext.createBufferSource();\n        source.buffer = buffer;\n        source.connect(timeContext.destination);\n\n        // callback adds one more click to the list of elements to delete\n        // eslint-disable-next-line\n        source.onended = () => {\n          ended += 1;\n        };\n\n        // gotta push the clock ahead so that it doesn't just duplicate events\n        incrementCompletion += calculatedTempo;\n        currentTime += calculatedTempo;\n        // initiate sound and push to a place we can reference it\n        source.start(currentTime + calculatedTempo);\n        queue.push(source);\n      }\n    }\n  }, 200);\n};\n\nconst cancel = () => {\n  clearInterval(setIntervalCancel);\n  for (let node in queue) {\n    queue[node].stop();\n  }\n};\n\nexport { play, cancel };\n","import React from 'react';\nimport { play, cancel } from './metronomeUtil.js';\n\nclass Metronome extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      tempo: this.props.tempo || 60,\n      goal: this.props.goal || 60,\n      incrementBy: this.props.incrementBy || 0,\n      incrementEvery: this.props.incrementEvery || 0,\n      hidden: this.props.hidden || false,\n      howLong: this.props.howLong || 10\n    };\n  }\n\n  changeTempo(tempo) {\n    if (tempo === '') {\n      this.setState({ tempo: 0 });\n    }\n    if (Number(tempo)) {\n      this.setState({ tempo: tempo });\n    }\n  }\n  changeGoal(newGoalTempo) {\n    if (newGoalTempo === '') {\n      this.setState({ goal: 0 });\n    } else {\n      this.setState({ goal: newGoalTempo });\n    }\n  }\n  changeIncrementBy(newIncrement) {\n    if (newIncrement === '') {\n      this.setState({ incrementBy: 0 });\n    } else {\n      this.setState({ incrementBy: newIncrement });\n    }\n  }\n  changeIncrementEvery(newIncrementEvery) {\n    if (newIncrementEvery === '') {\n      this.setState({ incrementEvery: 0 });\n    } else {\n      this.setState({ incrementEvery: newIncrementEvery });\n    }\n  }\n  changeHowLong(howLong) {\n    if (howLong === '') {\n      this.setState({ howLong: 0 });\n    } else {\n      this.setState({ howLong: howLong });\n    }\n  }\n\n  start() {\n    let { tempo, goal, incrementBy, incrementEvery } = this.state;\n    play(\n      Number(tempo),\n      Number(goal),\n      Number(incrementBy),\n      Number(incrementEvery)\n    );\n  }\n  stopMetronome() {\n    cancel();\n  }\n  incrementBy10() {\n    this.stopMetronome();\n    this.setState({ tempo: this.state.tempo + 10 });\n    this.start();\n  }\n  decrementBy10() {\n    this.stopMetronome();\n    this.setState({ tempo: this.state.tempo - 10 });\n    this.start();\n  }\n\n  render() {\n    if (!this.state.hidden) {\n      return (\n        <div className=\"module\">\n          <div className=\"background\">\n            <h2>Metronome</h2>\n            <ul className=\"moduleContents\">\n              <div className=\"moduleElement\">\n                Starting Tempo:\n                <input\n                  type=\"text\"\n                  value={this.state.tempo}\n                  onChange={e => {\n                    this.changeTempo(e.target.value);\n                  }}\n                ></input>\n              </div>\n              <div className=\"moduleElement\">\n                Goal Tempo:\n                <input\n                  type=\"text\"\n                  value={this.state.goal}\n                  onChange={e => {\n                    this.changeGoal(e.target.value);\n                  }}\n                ></input>\n              </div>\n              <div className=\"moduleElement\">\n                Increment by\n                <input\n                  type=\"text\"\n                  value={this.state.incrementBy}\n                  onChange={e => {\n                    this.changeIncrementBy(e.target.value);\n                  }}\n                ></input>\n              </div>\n              <div className=\"moduleElement\">\n                Every\n                <input\n                  type=\"text\"\n                  value={this.state.incrementEvery}\n                  onChange={e => {\n                    this.changeIncrementEvery(e.target.value);\n                  }}\n                ></input>\n              </div>\n              <div className=\"moduleElement\">\n                HowLong?\n                <input\n                  type=\"text\"\n                  value={this.state.howLong}\n                  onChange={e => {\n                    this.changeHowLong(e.target.value);\n                  }}\n                ></input>\n              </div>\n            </ul>\n            <ul>\n              {/* <div className=\"moduleElement\">\n                <button\n                  className=\"moduleButton\"\n                  onClick={() =>\n                    this.props.addToPracticeStack(\n                      this.state.tempo,\n                      this.state.goal,\n                      this.state.incrementBy,\n                      this.state.incrementEvery,\n                      this.state.howLong\n                    )\n                  }\n                >\n                  Save\n                </button>\n              </div> */}\n              <div className=\"moduleElement\">\n                <button\n                  className=\"moduleButton\"\n                  onClick={() => this.incrementBy10()}\n                >\n                  +10bpm\n                </button>\n              </div>\n              <div className=\"moduleElement\">\n                <button\n                  className=\"moduleButton\"\n                  onClick={() => this.decrementBy10()}\n                >\n                  -10bpm\n                </button>\n              </div>\n              <button\n                className=\"playMetronome\"\n                onClick={() => this.start(this.state.tempo)}\n              >\n                Play\n              </button>\n              <button\n                className=\"stopMetronome\"\n                onClick={() => this.stopMetronome()}\n              >\n                Stop\n              </button>\n            </ul>\n          </div>\n        </div>\n      );\n    } else {\n      return <></>;\n    }\n  }\n}\n\nexport default Metronome;\n","window.AudioContext = window.AudioContext || window.webkitAudioContext;\nconst context = new AudioContext();\nlet pitches = [\n  440,\n  466.16,\n  493.88,\n  523.25,\n  554.37,\n  587.33,\n  622.25,\n  659.25,\n  698.46,\n  739.99,\n  793.99,\n  830.61\n];\n\nlet sounds = [];\nconst makeSound = pitch => {\n  let freq = pitches[pitch - 1];\n  console.log(freq);\n  if (!sounds[0]) {\n    let oscillator = context.createOscillator();\n    let gain = context.createGain();\n    sounds.push(oscillator);\n    sounds.push(gain);\n\n    oscillator.type = 'sine';\n    oscillator.frequency.value = freq;\n\n    oscillator.connect(gain);\n    gain.connect(context.destination);\n\n    oscillator.start();\n    return pitch;\n  }\n};\n\nconst stopSound = () => {\n  console.log(sounds);\n  for (let sound in sounds) {\n    if (sound % 2 === 0) {\n      sounds[sound].stop();\n    }\n  }\n  sounds = [];\n};\nexport { makeSound, stopSound };\n","import React, { useState } from 'react';\nimport { makeSound, stopSound } from './Drone.js';\n\nconst ToneGenerator = () => {\n  const [pitch, setPitch] = useState(1);\n  let [isPlaying, setIsPlaying] = useState(false);\n\n  const changePitch = pitch => {\n    setPitch(pitch);\n    if (isPlaying) {\n      cancelSound();\n      startSound(pitch);\n    }\n  };\n  const startSound = pitch => {\n    makeSound(pitch);\n    setIsPlaying(true);\n  };\n  const cancelSound = () => {\n    stopSound();\n    setIsPlaying(false);\n  };\n\n  let pitchName = pitch => {\n    let names = [\n      'A',\n      'Bb',\n      'B',\n      'C',\n      'C#',\n      'D',\n      'D#',\n      'E',\n      'F',\n      'F#',\n      'G',\n      'G#'\n    ];\n    return names[pitch - 1];\n  };\n\n  return (\n    <div className=\"module\">\n      <div className=\"background\">\n        <h1>Drone Generator</h1>\n        <h2>Pitch: {pitchName(pitch)}</h2>\n        <ul className=\"moduleContents\">\n          <div className=\"moduleElement\">\n            <input\n              className=\"pitchSlider\"\n              type=\"range\"\n              min=\"1\"\n              max=\"12\"\n              value={pitch}\n              onChange={e => changePitch(e.target.value)}\n            ></input>\n          </div>\n          <div className=\"moduleElement\">\n            <button\n              className=\"moduleButton\"\n              onClick={() => {\n                startSound(pitch);\n              }}\n            >\n              Start\n            </button>\n          </div>\n          <div className=\"moduleElement\">\n            <button className=\"moduleButton\" onClick={() => cancelSound()}>\n              Stop\n            </button>\n          </div>\n        </ul>\n      </div>\n    </div>\n  );\n};\n\nexport default ToneGenerator;\n","import React from 'react';\nimport './App.css';\nimport Metronome from './components/Metronome.jsx';\nimport ToneGenerator from './components/ToneGenerator.jsx';\nimport PracticeStack from './components/PracticeStack.jsx';\nimport AutoGnome from './components/AutoGnome.jsx';\n\nclass App extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      practiceStack: []\n    };\n    // this.addToPracticeStack = this.addToPracticeStack.bind(this);\n  }\n\n  // addToPracticeStack(tempo, goal, incrementBy, incrementEvery, howLong) {\n  //   this.state.practiceStack.push({\n  //     tempo,\n  //     goal,\n  //     incrementBy,\n  //     incrementEvery,\n  //     howLong\n  //   });\n  //   this.setState({ practiceStack: this.state.practiceStack });\n  // }\n\n  render() {\n    return (\n      <div className=\"App\">\n        <h1 className=\"header\">Auto Gnome</h1>\n        <div className=\"main\">\n          {/* <PracticeStack\n            className=\"practiceStackContainer\"\n            practiceStack={this.state.practiceStack}\n          /> */}\n          <div className=\"moduleContainer\">\n            <Metronome\n              addToPracticeStack={this.addToPracticeStack}\n              tempo={80}\n              goal={100}\n              incrementBy={5}\n              incrementEvery={10}\n            />\n            <ToneGenerator />\n            {/* <AutoGnome practiceStack={this.state.practiceStack} /> */}\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport { play, cancel } from './metronomeUtil.js';\nconst AudioContext = window.AudioContext || window.webkitAudioContext;\nconst timeContext = new AudioContext();\n\nconst runGnomes = practiceStack => {\n  // check if array has multiple entries\n  if (Array.isArray(practiceStack) && practiceStack.length > 0) {\n    const { tempo, goal, incrementBy, incrementEvery } = practiceStack[0];\n\n    let currentTime = timeContext.currentTime + 0.2;\n    let source = timeContext.createOscillator();\n    let gain = timeContext.createGain();\n    gain.gain.value = 0;\n    source.connect(gain);\n    gain.connect(timeContext.destination);\n\n    source.onended = () => {\n      play(tempo, goal, incrementBy, incrementEvery);\n      cancelGnomeAndAdvance(practiceStack, practiceStack[0].howLong);\n    };\n    source.start(currentTime);\n    console.log(source);\n    source.stop(currentTime + 0.1);\n  }\n};\n\nconst cancelGnomeAndAdvance = (practiceStack, delay) => {\n  if (practiceStack.length >= 1) {\n    let currentTime = timeContext.currentTime + 0.2;\n    let source = timeContext.createOscillator();\n    let gain = timeContext.createGain();\n    gain.gain.value = 0;\n    source.connect(gain);\n    gain.connect(timeContext.destination);\n\n    source.onended = () => {\n      cancel();\n      if (practiceStack.length > 1) {\n        runGnomes(practiceStack.slice(1));\n      }\n    };\n\n    source.start(currentTime);\n    source.stop(delay);\n  }\n};\n\nconst AutoGnome = ({ practiceStack }) => {\n  return (\n    <div>\n      <button className=\"runGnomes\" onClick={() => runGnomes(practiceStack)}>\n        Run Gnomes\n      </button>\n      <button className=\"stopGnomes\" onClick={() => cancel()}>\n        STOP\n      </button>\n    </div>\n  );\n};\n\nexport default AutoGnome;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App.jsx';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}