(this["webpackJsonppractical.ly"]=this["webpackJsonppractical.ly"]||[]).push([[0],[,,,,,,,,function(e,t,n){e.exports=n.p+"static/media/metronome1.fd742d0f.flac"},,,,function(e,t,n){e.exports=n(21)},,,,,function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),c=n(11),r=n.n(c),i=(n(17),n(1)),l=n(2),s=n(6),u=n(4),m=n(3),d=n(7),p=(n(18),n(5)),h=n.n(p),f=n(8),v=n.n(f),E=function(e,t,n){this.context=e,this.urlList=t,this.onload=n,this.bufferList=new Array,this.loadCount=0};E.prototype.loadBuffer=function(e,t){var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer";var a=this;n.onload=function(){a.context.decodeAudioData(n.response,(function(n){n?(a.bufferList[t]=n,++a.loadCount===a.urlList.length&&a.onload(a.bufferList)):alert("error decoding file data: "+e)}),(function(e){console.error("decodeAudioData error",e)}))},n.onerror=function(){alert("BufferLoader: XHR error")},n.send()},E.prototype.load=function(){for(var e=0;e<this.urlList.length;++e)this.loadBuffer(this.urlList[e],e)};var g=E;window.AudioContext=window.AudioContext||window.webkitAudioContext;var y,k,w=new AudioContext,b=function(e){y=e[0]},S=function(){return h.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:void 0===y&&new g(w,[v.a],b).load();case 1:case"end":return e.stop()}}))},N=0,C=[],B=function(e,t,n,a){var o=new AudioContext,c=e,r=60/c,i=o.currentTime+.2,l=0;k=setInterval((function(){for(var e=0;e<N;e++)C.shift();if(N=0,C.length<21)for(var s=1;s<21;s++){n&&a&&c<t&&l>a&&(l=0,(c+=n)>t&&(c=t),r=60/c);var u=o.createBufferSource();u.buffer=y,u.connect(o.destination),u.onended=function(){N+=1},l+=r,u.start(i+r),C.push(u),i+=r}}),200)},x=function(){for(var e in clearInterval(k),C)C[e].stop()},A=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={tempo:n.props.tempo||60,autoPlay:n.props.autoPlay||!1,goal:n.props.goal||60,incrementBy:n.props.incrementBy||0,incrementEvery:n.props.incrementEvery||0,hidden:n.props.hidden||!1,howLong:n.props.howLong||10},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"changeTempo",value:function(e){""===e&&this.setState({tempo:0}),Number(e)&&this.setState({tempo:e})}},{key:"changeGoal",value:function(e){""===e?this.setState({goal:0}):this.setState({goal:e})}},{key:"changeIncrementBy",value:function(e){""===e?this.setState({incrementBy:0}):this.setState({incrementBy:e})}},{key:"changeIncrementEvery",value:function(e){""===e?this.setState({incrementEvery:0}):this.setState({incrementEvery:e})}},{key:"changeHowLong",value:function(e){""===e?this.setState({howLong:0}):this.setState({howLong:e})}},{key:"start",value:function(){var e=this.state,t=e.tempo,n=e.goal,a=e.incrementBy,o=e.incrementEvery;B(Number(t),Number(n),Number(a),Number(o))}},{key:"stopMetronome",value:function(){x()}},{key:"incrementBy10",value:function(){this.stopMetronome(),this.setState({tempo:this.state.tempo+10}),this.start()}},{key:"decrementBy10",value:function(){this.stopMetronome(),this.setState({tempo:this.state.tempo-10}),this.start()}},{key:"componentDidMount",value:function(){return h.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:S(),this.state.autoPlay&&this.start(),console.log(this.props.passedProp);case 3:case"end":return e.stop()}}),null,this)}},{key:"render",value:function(){var e=this;return this.state.hidden?o.a.createElement(o.a.Fragment,null):o.a.createElement("div",{className:"module"},o.a.createElement("div",{className:"background"},o.a.createElement("h2",null,"Metronome"),o.a.createElement("ul",{className:"moduleContents"},o.a.createElement("div",{className:"moduleElement"},"Starting Tempo:",o.a.createElement("input",{type:"text",value:this.state.tempo,onChange:function(t){e.changeTempo(t.target.value)}})),o.a.createElement("div",{className:"moduleElement"},"Goal Tempo:",o.a.createElement("input",{type:"text",value:this.state.goal,onChange:function(t){e.changeGoal(t.target.value)}})),o.a.createElement("div",{className:"moduleElement"},"Increment by",o.a.createElement("input",{type:"text",value:this.state.incrementBy,onChange:function(t){e.changeIncrementBy(t.target.value)}})),o.a.createElement("div",{className:"moduleElement"},"Every",o.a.createElement("input",{type:"text",value:this.state.incrementEvery,onChange:function(t){e.changeIncrementEvery(t.target.value)}})),o.a.createElement("div",{className:"moduleElement"},"HowLong?",o.a.createElement("input",{type:"text",value:this.state.howLong,onChange:function(t){e.changeHowLong(t.target.value)}}))),o.a.createElement("ul",null,o.a.createElement("div",{className:"moduleElement"},o.a.createElement("button",{className:"moduleButton",onClick:function(){return e.props.addToPracticeStack(e.state.tempo,e.state.goal,e.state.incrementBy,e.state.incrementEvery,e.state.howLong)}},"Save")),o.a.createElement("div",{className:"moduleElement"},o.a.createElement("button",{className:"moduleButton",onClick:function(){return e.incrementBy10()}},"+10bpm")),o.a.createElement("div",{className:"moduleElement"},o.a.createElement("button",{className:"moduleButton",onClick:function(){return e.decrementBy10()}},"-10bpm")),o.a.createElement("button",{className:"playMetronome",onClick:function(){return e.start(e.state.tempo)}},"Play"),o.a.createElement("button",{className:"stopMetronome",onClick:function(){return e.stopMetronome()}},"Stop"))))}}]),t}(o.a.Component),L=n(9);n(20);window.AudioContext=window.AudioContext||window.webkitAudioContext;var O=new AudioContext,T=[440,466.16,493.88,523.25,554.37,587.33,622.25,659.25,698.46,739.99,793.99,830.61],j=[],G=function(){var e=Object(a.useState)(1),t=Object(L.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(!1),i=Object(L.a)(r,2),l=i[0],s=i[1],u=function(e){!function(e){var t=T[e-1];if(console.log(t),!j[0]){var n=O.createOscillator(),a=O.createGain();j.push(n),j.push(a),n.type="sine",n.frequency.value=t,n.connect(a),a.connect(O.destination),n.start(),console.log(n)}}(e),s(!0)},m=function(){!function(){for(var e in console.log(j),j)e%2===0&&j[e].stop();j=[],console.log("stopSound")}(),s(!1)};return o.a.createElement("div",{className:"module"},o.a.createElement("div",{className:"background"},o.a.createElement("h1",null,"Drone Generator"),o.a.createElement("h2",null,"Pitch: ",function(e){return["A","Bb","B","C","C#","D","D#","E","F","F#","G","G#"][e-1]}(n)),o.a.createElement("ul",{className:"moduleContents"},o.a.createElement("div",{className:"moduleElement"},o.a.createElement("input",{className:"pitchSlider",type:"range",min:"1",max:"12",value:n,onChange:function(e){return function(e){c(e),l&&(m(),u(e))}(e.target.value)}})),o.a.createElement("div",{className:"moduleElement"},o.a.createElement("button",{className:"moduleButton",onClick:function(){u(n)}},"Start")),o.a.createElement("div",{className:"moduleElement"},o.a.createElement("button",{className:"moduleButton",onClick:function(){return m()}},"Stop")))))},P=function(e){var t=e.practiceStack;return console.log(Array.isArray(t)),o.a.createElement(o.a.Fragment,null,t.length>0?t.map((function(e){return o.a.createElement("div",{className:"practiceStack"},"Tempo:",e.tempo," ","\n","Goal:",e.goal," ","\n","incrementBy:",e.incrementBy," ","\n","incrementEvery:",e.incrementEvery," ","\n")})):o.a.createElement(o.a.Fragment,null))},M=new(window.AudioContext||window.webkitAudioContext);S();var I=function(e){if(console.log(e[0]),Array.isArray(e)&&e.length>0){console.log(e);var t=e[0],n=t.tempo,a=t.goal,o=t.incrementBy,c=t.incrementEvery,r=M.currentTime+.2,i=M.createOscillator(),l=M.createGain();l.gain.value=0,i.connect(l),l.connect(M.destination),l.gain.value=.01,console.log(i),i.onended=function(){B(n,a,o,c),D(e,e[0].howLong)},i.start(r),console.log(i),i.stop(r+.1)}},D=function(e,t){if(e.length>=1){M.currentTime;var n=M.createOscillator(),a=M.createGain();a.gain.value=0,n.connect(a),a.connect(M.destination),console.log("ON END "),n.onended=function(){console.log("here"),x(),I(e.slice(1))},n.start(),n.stop(t)}},F=function(e){var t=e.practiceStack;return o.a.createElement("div",null,o.a.createElement("button",{className:"runGnomes",onClick:function(){return I(t)}},"Run Gnomes"),o.a.createElement("button",{className:"stopGnomes",onClick:function(){return x()}},"STOP"))},H=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(s.a)(this,Object(u.a)(t).call(this))).state={practiceStack:[]},e.addToPracticeStack=e.addToPracticeStack.bind(Object(m.a)(e)),e}return Object(d.a)(t,e),Object(l.a)(t,[{key:"addToPracticeStack",value:function(e,t,n,a,o){this.state.practiceStack.push({tempo:e,goal:t,incrementBy:n,incrementEvery:a,howLong:o}),this.setState({practiceStack:this.state.practiceStack})}},{key:"render",value:function(){return o.a.createElement("div",{className:"App"},o.a.createElement("h1",{className:"header"},"Practical.ly"),o.a.createElement("div",{className:"main"},o.a.createElement(P,{className:"practiceStackContainer",practiceStack:this.state.practiceStack}),o.a.createElement("div",{className:"moduleContainer"},o.a.createElement(A,{addToPracticeStack:this.addToPracticeStack,tempo:80,goal:100,incrementBy:5,incrementEvery:10}),o.a.createElement(G,null),o.a.createElement(F,{practiceStack:this.state.practiceStack}))))}}]),t}(o.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(H,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[12,1,2]]]);
//# sourceMappingURL=main.954f1634.chunk.js.map