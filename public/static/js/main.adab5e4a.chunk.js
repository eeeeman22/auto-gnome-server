(this["webpackJsonppractical.ly"]=this["webpackJsonppractical.ly"]||[]).push([[0],[,,function(e,t,n){e.exports=n.p+"static/media/metronome1.fd742d0f.flac"},,,,,,,,,function(e,t,n){e.exports=n(20)},,,,,function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(5),c=n.n(r),l=(n(16),n(17),n(1)),i=n.n(l),s=n(6),u=n(7),m=n(9),d=n(8),f=n(10),h=n(2),v=n.n(h),p=function(e,t,n){this.context=e,this.urlList=t,this.onload=n,this.bufferList=new Array,this.loadCount=0};p.prototype.loadBuffer=function(e,t){var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer";var a=this;n.onload=function(){a.context.decodeAudioData(n.response,(function(n){n?(a.bufferList[t]=n,++a.loadCount===a.urlList.length&&a.onload(a.bufferList)):alert("error decoding file data: "+e)}),(function(e){console.error("decodeAudioData error",e)}))},n.onerror=function(){alert("BufferLoader: XHR error")},n.send()},p.prototype.load=function(){for(var e=0;e<this.urlList.length;++e)this.loadBuffer(this.urlList[e],e)};var E=p;window.AudioContext=window.AudioContext||window.webkitAudioContext;var y,g,N=new AudioContext,b=function(e){y=e[0]},w=function(){var e=arguments;return i.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:e.length>0&&void 0!==e[0]?e[0]:1,void 0===y&&new E(N,[v.a],b).load();case 2:case"end":return t.stop()}}))},C=0,k=[],B=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={tempo:60,playing:!1,goal:60,incrementBy:0,incrementEvery:0},n}return Object(f.a)(t,e),Object(u.a)(t,[{key:"changeTempo",value:function(e){""===e&&this.setState({tempo:0}),Number(e)&&this.setState({tempo:e})}},{key:"changePlaying",value:function(){this.setState({playing:!this.state.playing})}},{key:"changeGoal",value:function(e){""===e?this.setState({goal:0}):this.setState({goal:e})}},{key:"changeIncrementBy",value:function(e){""===e?this.setState({incrementBy:0}):this.setState({incrementBy:e})}},{key:"changeIncrementEvery",value:function(e){""===e?this.setState({incrementEvery:0}):this.setState({incrementEvery:e})}},{key:"start",value:function(){var e=this.state,t=e.tempo,n=e.goal,a=e.incrementBy,o=e.incrementEvery;!function(e,t,n,a){var o=new AudioContext,r=e,c=60/r,l=o.currentTime+.2,i=0;g=setInterval((function(){console.log("QUEUE LEN",k.length);for(var e=0;e<C;e++)k.shift();if(C=0,k.length<21)for(var s=1;s<21;s++){n&&a&&r<t&&i>a&&(i=0,(r+=n)>t&&(r=t),c=60/r,console.log("INCREMENTING. NEW TEMPO:",c));var u=o.createBufferSource();u.buffer=y,u.connect(o.destination),u.onended=function(){console.log("playing"),C+=1},i+=c,console.log("written up to",l+c),u.start(l+c),k.push(u),l+=c}}),200)}(Number(t),Number(n),Number(a),Number(o))}},{key:"stopMetronome",value:function(){!function(){for(var e in clearInterval(g),k)k[e].stop()}()}},{key:"incrementBy10",value:function(){this.stopMetronome(),this.setState({tempo:this.state.tempo+10}),this.start()}},{key:"decrementBy10",value:function(){this.stopMetronome(),this.setState({tempo:this.state.tempo-10}),this.start()}},{key:"componentDidMount",value:function(){return i.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:w();case 1:case"end":return e.stop()}}))}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"module"},o.a.createElement("div",{className:"background"},o.a.createElement("h2",null,"Metronome"),o.a.createElement("ul",{className:"moduleContents"},o.a.createElement("div",{className:"moduleElement"},"Starting Tempo:",o.a.createElement("input",{type:"text",value:this.state.tempo,onChange:function(t){e.changeTempo(t.target.value)}})),o.a.createElement("div",{className:"moduleElement"},"Goal Tempo:",o.a.createElement("input",{type:"text",value:this.state.goal,onChange:function(t){e.changeGoal(t.target.value)}})),o.a.createElement("div",{className:"moduleElement"},"Increment by",o.a.createElement("input",{type:"text",value:this.state.incrementBy,onChange:function(t){e.changeIncrementBy(t.target.value)}})),o.a.createElement("div",{className:"moduleElement"},"Every",o.a.createElement("input",{type:"text",value:this.state.incrementEvery,onChange:function(t){e.changeIncrementEvery(t.target.value)}}))),o.a.createElement("ul",null,o.a.createElement("div",{className:"moduleElement"},o.a.createElement("button",{className:"moduleButton",onClick:function(){return e.incrementBy10()}},"+10bpm")),o.a.createElement("div",{className:"moduleElement"},o.a.createElement("button",{className:"moduleButton",onClick:function(){return e.decrementBy10()}},"-10bpm")),o.a.createElement("button",{className:"playMetronome",onClick:function(){return e.start(e.state.tempo)}},"Play"),o.a.createElement("button",{className:"stopMetronome",onClick:function(){return e.stopMetronome()}},"Stop"))))}}]),t}(o.a.Component),x=n(3);n(19);window.AudioContext=window.AudioContext||window.webkitAudioContext;var S=new AudioContext,A=[440,466.16,493.88,523.25,554.37,587.33,622.25,659.25,698.46,739.99,793.99,830.61],M=[],O=function(){var e=Object(a.useState)(1),t=Object(x.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(!1),l=Object(x.a)(c,2),i=l[0],s=l[1],u=function(e){!function(e){var t=A[e-1];if(console.log(t),!M[0]){var n=S.createOscillator(),a=S.createGain();M.push(n),M.push(a),n.type="sine",n.frequency.value=t,n.connect(a),a.connect(S.destination),n.start(),console.log(n)}}(e),s(!0)},m=function(){!function(){for(var e in console.log(M),M)e%2===0&&M[e].stop();M=[],console.log("stopSound")}(),s(!1)};return o.a.createElement("div",{className:"module"},o.a.createElement("div",{className:"background"},o.a.createElement("h1",null,"Drone Generator"),o.a.createElement("h2",null,"Pitch: ",function(e){return["A","Bb","B","C","C#","D","D#","E","F","F#","G","G#"][e-1]}(n)),o.a.createElement("ul",{className:"moduleContents"},o.a.createElement("div",{className:"moduleElement"},o.a.createElement("input",{className:"pitchSlider",type:"range",min:"1",max:"12",value:n,onChange:function(e){return function(e){r(e),i&&(m(),u(e))}(e.target.value)}})),o.a.createElement("div",{className:"moduleElement"},o.a.createElement("button",{className:"moduleButton",onClick:function(){u(n)}},"Start")),o.a.createElement("div",{className:"moduleElement"},o.a.createElement("button",{className:"moduleButton",onClick:function(){return m()}},"Stop")))))};var I=function(){return o.a.createElement("div",{className:"App"},o.a.createElement("h1",{className:"header"},"Practical.ly"),o.a.createElement("div",{className:"main"},o.a.createElement("div",{className:"moduleContainer"},o.a.createElement(B,null),o.a.createElement(O,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(I,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[11,1,2]]]);
//# sourceMappingURL=main.adab5e4a.chunk.js.map